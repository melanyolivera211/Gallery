<div class="user-form-container">

	<ion-card>

		<ion-card-header>

			<ion-card-title>{{ user ? ('app.profile.editTitle' | translate) : ('app.profile.createTitle' | translate) }}</ion-card-title>

		</ion-card-header>

		<ion-card-content>

			<form [formGroup]="userForm" (ngSubmit)="onSubmitForm()" class="user-form">

				<div class="form-row">

					<app-input formControlName="name" type="text" [label]="'app.profile.name' | translate" [placeholder]="'app.profile.namePh' | translate" [required]="true"
						[minLength]="2" [errorMessage]="'app.profile.nameError' | translate"></app-input>

					<app-input formControlName="surname" type="text" [label]="'app.profile.surname' | translate" [placeholder]="'app.profile.surnamePh' | translate"
						[required]="true" [minLength]="2"
						[errorMessage]="'app.profile.surnameError' | translate"></app-input>

				</div>

				<app-input formControlName="email" type="email" [label]="'app.profile.email' | translate" [placeholder]="'app.profile.emailPh' | translate"
					[required]="true" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
					[errorMessage]="'app.profile.emailError' | translate"></app-input>

				<app-input formControlName="password" type="password" [label]="'app.profile.password' | translate"
					[placeholder]="user ? ('app.profile.passwordKeep' | translate) : ('app.profile.passwordPh' | translate)" [required]="!user"
					[minLength]="6" [errorMessage]="'app.profile.passwordError' | translate"></app-input>

				<div class="image-section">

					<ion-label class="image-label">
						{{ 'app.profile.picture' | translate }}
						<span class="required-asterisk" *ngIf="!user">*</span>

					</ion-label>

					<div class="image-preview" *ngIf="selectedImageUrl">

						<img [src]="selectedImageUrl" [alt]="'app.profile.picture' | translate">

						<ion-button fill="clear" color="danger" (click)="removeImage()">

							<ion-icon name="close-circle"></ion-icon>

						</ion-button>

					</div>

					<ion-button expand="block" fill="outline" (click)="takePicture()">

						<ion-icon name="camera" slot="start"></ion-icon>
						{{ selectedImageUrl ? ('app.profile.changePicture' | translate) : ('app.profile.takePicture' | translate) }}

					</ion-button>

					<input type="file" accept="image/*" #fileInput style="display: none" (change)="onFileSelected($event)">

					<ion-button expand="block" fill="outline" (click)="fileInput.click()">

						<ion-icon name="image" slot="start"></ion-icon>
						{{ 'app.profile.selectFromGallery' | translate }}

					</ion-button>

				</div>

				<div class="form-actions">

					<app-button type="submit" [disabled]="userForm.invalid" [color]="userForm.invalid ? 'medium' : 'primary'">
						{{ user ? ('app.profile.update' | translate) : ('app.profile.create' | translate) }}
					</app-button>

				</div>

			</form>

		</ion-card-content>

	</ion-card>

</div>